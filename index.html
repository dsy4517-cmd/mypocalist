<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My IVE Poca ğŸ’–</title>
<style>
body { font-family: Arial; background: linear-gradient(to bottom,#ffd6ec,#fff0f7); text-align:center; margin:0; }
h1 { color:#ff4fa3; padding:15px; }
.counter { font-weight:bold; color:#ff4fa3; margin-bottom:10px; }
.input-box { padding:10px; }
input { padding:6px; margin:3px; border-radius:10px; border:1px solid #ccc; }
button { padding:6px 10px; border-radius:10px; border:none; background:#ff9ed1; color:white; cursor:pointer; }
.grid { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; padding:10px; }
.card { background:white; border-radius:15px; padding:10px; position:relative; cursor:pointer; transition:0.2s; }
.card.owned { background:#ff9ed1; color:white; }
.delete { position:absolute; top:5px; right:5px; font-size:12px; cursor:pointer; }
</style>
</head>
<body>

<h1>ğŸ‘‘ My IVE Poca ğŸ‘‘</h1>
<div class="counter" id="counter">0ì¥ (0%)</div>

<div class="input-box">
  <input id="member" placeholder="ë©¤ë²„">
  <input id="album" placeholder="ì•¨ë²”">
  <input id="grade" placeholder="ë“±ê¸‰">
  <button onclick="addCard()">ì¶”ê°€</button>
</div>

<div class="grid" id="grid"></div>

<script>
// ê¸°ë³¸ ë°ì´í„° 6000ì¥ ìƒ˜í”Œ (ì‹¤ì œ ì‚¬ìš©í•  ë• ì—¬ê¸° ìˆ«ì ëŠ˜ë¦¬ë©´ ë¨)
let cards = JSON.parse(localStorage.getItem("pocaData")) || [];
if(cards.length===0){
  for(let i=1;i<=6000;i++){
    cards.push({member:"ë©¤ë²„"+((i-1)%6+1), album:"ì•¨ë²”"+((i-1)%5+1), grade:["â­","â­â­","â­â­â­","ğŸ’ë ˆì–´"][(i-1)%4], owned:false});
  }
}

const grid = document.getElementById("grid");
const counter = document.getElementById("counter");

const pageSize = 100;
let currentPage = 0;

function save(){ localStorage.setItem("pocaData", JSON.stringify(cards)); updateCounter(); }

function updateCounter(){
  const owned = cards.filter(c=>c.owned).length;
  const total = cards.length;
  counter.innerText = `ğŸ’– ${owned} / ${total} (${Math.round((owned/total)*100)}%)`;
}

function render(){
  grid.innerHTML="";
  const start = currentPage*pageSize;
  const end = Math.min(start+pageSize, cards.length);
  for(let i=start;i<end;i++){
    const card = cards[i];
    const div = document.createElement("div");
    div.className="card";
    if(card.owned) div.classList.add("owned");
    div.innerHTML=`
      <div class="delete" onclick="deleteCard(${i},event)">âŒ</div>
      <div><b>${card.member}</b></div>
      <div>${card.album}</div>
      <div>${card.grade}</div>
    `;
    div.onclick=function(){
      card.owned=!card.owned; render();
    }
    div.ondblclick=function(){
      const m=prompt("ë©¤ë²„ ì´ë¦„:",card.member);
      const a=prompt("ì•¨ë²” ì´ë¦„:",card.album);
      const g=prompt("ë“±ê¸‰:",card.grade);
      if(m) card.member=m;
      if(a) card.album=a;
      if(g) card.grade=g;
      render();
    }
    grid.appendChild(div);
  }
  save();
}

// ìŠ¤í¬ë¡¤ë¡œ ë‹¤ìŒ í˜ì´ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
window.onscroll=function(){
  if((window.innerHeight+window.scrollY)>=document.body.offsetHeight-10){
    if((currentPage+1)*pageSize<cards.length){
      currentPage++;
      render();
    }
  }
}

function addCard(){
  const m=document.getElementById("member").value;
  const a=document.getElementById("album").value;
  const g=document.getElementById("grade").value;
  if(!m) return;
  cards.push({member:m, album:a, grade:g, owned:false});
  document.getElementById("member").value="";
  document.getElementById("album").value="";
  document.getElementById("grade").value="";
  currentPage=Math.floor(cards.length/pageSize);
  render();
}

function deleteCard(index,e){
  e.stopPropagation();
  cards.splice(index,1);
  render();
}

render();
</script>

</body>
</html>
