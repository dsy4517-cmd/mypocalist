<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My IVE Poca üíñ</title>

<style>
body {
  font-family: Arial;
  background: linear-gradient(to bottom, #ffd6ec, #fff0f7);
  text-align: center;
  margin: 0;
}

h1 {
  color: #ff4fa3;
  padding: 15px;
}

.counter {
  font-weight: bold;
  color: #ff4fa3;
  margin-bottom: 10px;
}

.input-box {
  padding: 10px;
}

input {
  padding: 6px;
  margin: 3px;
  border-radius: 10px;
  border: 1px solid #ccc;
}

button {
  padding: 6px 10px;
  border-radius: 10px;
  border: none;
  background: #ff9ed1;
  color: white;
  cursor: pointer;
}

.grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  padding: 10px;
}

.card {
  background: white;
  border-radius: 15px;
  padding: 10px;
  position: relative;
  cursor: pointer;
  transition: 0.2s;
}

.card.owned {
  background: #ff9ed1;
  color: white;
}

.delete {
  position: absolute;
  top: 5px;
  right: 5px;
  font-size: 12px;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>üëë My IVE Poca üëë</h1>
<div class="counter" id="counter">0Ïû• (0%)</div>

<div class="input-box">
  <input id="member" placeholder="Î©§Î≤Ñ">
  <input id="album" placeholder="Ïï®Î≤î">
  <input id="grade" placeholder="Îì±Í∏â">
  <button onclick="addCard()">Ï∂îÍ∞Ä</button>
</div>

<div class="grid" id="grid"></div>

<script>
let cards = JSON.parse(localStorage.getItem("pocaData")) || [];

const grid = document.getElementById("grid");
const counter = document.getElementById("counter");

function save() {
  localStorage.setItem("pocaData", JSON.stringify(cards));
  updateCounter();
}

function updateCounter() {
  const ownedCount = cards.filter(c => c.owned).length;
  const totalCount = cards.length;
  const percent = totalCount ? Math.round((ownedCount / totalCount) * 100) : 0;
  counter.innerText = `üíñ ${ownedCount} / ${totalCount} (${percent}%)`;
}

function render() {
  grid.innerHTML = "";
  cards.forEach((card, index) => {
    const div = document.createElement("div");
    div.className = "card";
    if(card.owned) div.classList.add("owned");
    div.innerHTML = `
      <div class="delete" onclick="deleteCard(${index}, event)">‚ùå</div>
      <div><b>${card.member}</b></div>
      <div>${card.album}</div>
      <div>${card.grade}</div>
    `;
    div.onclick = function() {
      card.owned = !card.owned;
      render();
    }
    grid.appendChild(div);
  });
  save();
}

function addCard() {
  const member = document.getElementById("member").value;
  const album = document.getElementById("album").value;
  const grade = document.getElementById("grade").value;

  if (!member) return;

  cards.push({ member, album, grade, owned: false });

  document.getElementById("member").value = "";
  document.getElementById("album").value = "";
  document.getElementById("grade").value = "";

  render();
}

function deleteCard(index, e) {
  e.stopPropagation(); // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Î≤ÑÎ∏î ÎßâÍ∏∞
  cards.splice(index, 1);
  render();
}

render();
</script>

</body>
</html>
